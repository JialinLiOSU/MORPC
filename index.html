<!DOCTYPE html>
<html lang="en">
<head>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard</title>

    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="dshbrd_ttrl/introjs.min.css">

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
    <script src="js/jquery.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.0/jquery-ui.js"></script> -->
    <script src="js/jquery-ui.js"></script>
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
    <script src="js/bootstrap.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.5.0/lodash.min.js"></script> -->
    <script src="js/lodash.min.js"></script>
    <script src="gridstack/gridstack.js"></script>
    <script src="gridstack/gridstack.jQueryUI.js"></script>
    <script src="js/d3.v3.min.js" charset="utf-8"></script>
    <script src="js/colorbrewer.min.x.js"></script>
    <script src="js/geojson.min.js"></script>
    <!-- <script src="http://code.responsivevoice.org/responsivevoice.js"></script> -->
    <script src="js/responsivevoice.js"></script>

    <link href="leaflet/v1.0.3/leaflet.css" rel="stylesheet" />
    <script src="leaflet/v1.0.3/leaflet.js"></script>
    <script src="js/heatmap.min.js"></script>
    <script src="js/leaflet-heatmap.js"></script>

    <link rel="stylesheet" href="gridstack/gridstack.css"/>
    <link rel="stylesheet" href="css/font-awesome-4.6.1/css/font-awesome.min.css">

    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div style="position: relative;">
        <img src="imgs/cura-background_txt.png" style="width:100%;"/>
        <!-- <div style="position:absolute; bottom:10px; left:30px;">
            <h3 style="color:#F35">D A S H B O A R D  ( 版本 丁 )</h3>
        </div> -->
        <div style="position:absolute; bottom:10px; right:15%;">
            <ul id="menu">
                <li class="menusel"><a>Home</a></li>
                <li> &middot; </li>
                <li class="menusel"><a href="https://osu.az1.qualtrics.com/jfe/form/SV_0czmqhKC4mLidIV">Survey</a></li>
                <li> &middot; </li>
                <li><a href="mapgallery/">Map gallery</a></li>
                <li> &middot; </li>
                <!-- <li><a>Dynamic Bus Maps</a>
                    <ul> -->
                        <li><a href="busdelays/">Bus delays</a></li>
                        <li> &middot; </li>
                        <li><a href="transit_access/">Transit accessibility</a></li>
                    <!-- </ul>
                </li> -->
                <li> &middot; </li>
                <li><a id="aaaaa" style="cursor: pointer;">Tutorial</a></li>
                <li> &middot; </li>
                <li class="end"><a href="about.html">About</a></li>
            </ul>
        </div>
    </div>



    <!-- <div>
        <a class="btn btn-default" id="save-grid" href="#">Save Grid</a>
        <a class="btn btn-default" id="load-grid" href="#">Load Grid</a>
        <a class="btn btn-default" id="clear-grid" href="#">Clear Grid</a>
    </div>

    <br/> -->

    <div class="row" id="topbanner">
        <div class="col-md-1 col-sm-1" id="banner-widgets">
            <div style="background-color: grey;" class="announcer inner-div" id="announcerx">
                <script>
                    function talk() {
                        responsiveVoice.speak("Hi! Thanks for using the Curio dashboard. It is " + d3.time.format("%A, %b %d %I %M %p")(curr_time) + ". Currently" + traffic_msg + ", " + aq_msg + ", and tweets are mostly about " + tweet_msg);
                    }
                </script>
                <a class="x" id="speaker-button">
                    <i onclick="talk()" class="fa fa-volume-up" aria-hidden="true"></i>
                </a>
                &nbsp;
                <a class="x" href="#myCarousel" data-toggle="modal" id="help-button">
                    <i class="fa fa-question-circle" aria-hidden="true"></i>
                </a>
                <!-- &nbsp;
                <a class="x" href="#settings" data-toggle="modal" id="settings-button" onclick="do_settings()">
                    <i class="fa fa-cog" aria-hidden="true"></i>
                </a> -->
            </div>
        </div>

        <div class="modal" id="settings" tabindex="-1" role="dialog" aria-labeledby="modalLabel">
          <div class="modal-dialog modal-md">
            <div class="modal-content" style="background-color: black;">
                <div class="modal-header">
                    <!-- <button class="success" data-dismiss="modal">close</button> -->
                  <button class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title" style="color: #DDDDDD;">Settings</h5>
                </div>
                <div class="modal-body">
                    <div class="modal-footer">
                        Accept cookies: <input type="checkbox" id="acceptcookies" onclick="set_acceptcookies('wow', this)">
                        <br/>
                        <p>Accepting cookies means we will store your settings, which will be used in your future visits to this site. The following settings will only be functional if the accept cookies option is checked.</p>
                        <hr/>
                        Auto speak: <input type="checkbox" id="autospeak" onclick="set_autospeak()">
                        <br/>
                        Save custom layout: <input type="checkbox" id="savelayout" onclick="set_savelayout()">

                    </div>
                      <!--end of item-->
                </div>
            </div>
            <!--modal content-->
          </div>
          <!--modal-dialog-->
        </div>

        <script>
        this.saveGrid = function () {
            alert("savegrid");
            this.serializedData = _.map($('.grid-stack > .grid-stack-item:visible'), function (el) {
                el = $(el);
                var node = el.data('_gridstack_node');
                return {
                    x: node.x,
                    y: node.y,
                    width: node.width,
                    height: node.height
                };
            }, this);
            $('#saved-data').val(JSON.stringify(this.serializedData, null, '    '));
            return false;
        }.bind(this);

        $('#savelayout').click(this.saveGrid);

        function set_acceptcookies(value, object) {

            alert(value)
        }

        function do_settings() {
            // alert(document.getElementById("acceptcookies").checked);
            // var x = document.cookie;
            // alert(x=="");
        }

        // w3schools
        function setCookie(cname,cvalue,exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays*24*60*60*1000));
            var expires = "expires=" + d.toGMTString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for(var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function checkCookie() {
            var user=getCookie("username");
            if (user != "") {
                alert("Welcome again " + user);
            } else {
               user = prompt("Please enter your name:","");
               if (user != "" && user != null) {
                   setCookie("username", user, 30);
               }
            }
        }



        </script>

        <div class="col-md-11 col-sm-11" id="announcers">
            <div class="col-md-3 col-sm-3">
                <div class="announcer inner-div" id="announcer0">
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="announcer inner-div" id="announcer1"></div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="announcer inner-div" id="announcer2"></div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="announcer inner-div" id="announcer3"></div>
            </div>
        </div>
    </div>

    <script src="js2/script-prior.js"></script>

    <div class="grid-stack"></div>

    <script src="setup.js"></script>

    <script src="js2/script-cogo-stacked-chart.js"></script>
    <script src="js2/script-histogram.js"></script>
    <script src="js2/script-tweets.js"></script>
    <script src="js2/script-air-quality.js"></script>
    <script src="js2/script-trips.js"></script>
    <script src="js2/script-cota-gtfs3_buses.js"></script>
    <script src="js2/script-cota-gtfs3_delays.js"></script>
    <script src="data/cameras.geojson.js"></script>
    <script src="js2/script-buckeye-traffic.js"></script>

    <script src="dshbrd_ttrl/intro.min.js"></script>
    <script src="dshbrd_ttrl/tutorial.js"></script>

    <!-- ******************************************* HELP ********************************************* -->

    <div class="modal fade" id="myCarousel" tabindex="-1" role="dialog" aria-labeledby="modalLabel">
      <div class="modal-dialog modal-md">
        <div class="modal-content" style="background-color: black;">
          <div class="modal-header">
              <!-- <button class="success" data-dismiss="modal">close</button> -->
            <button class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title" style="color: #DDDDDD;">How to Use</h5>
          </div>
          <div class="modal-body">
            <div class="carousel hidden-xs"  id="featured">
              <ol class="carousel-indicators">
                <li data-target="#featured" data-slide-to="0" class="active"></li>
                <li data-target="#featured" data-slide-to="1" ></li>
                <li data-target="#featured" data-slide-to="2" ></li>
                <li data-target="#featured" data-slide-to="3" ></li>
                <li data-target="#featured" data-slide-to="4" ></li>
                <li data-target="#featured" data-slide-to="5" ></li>
              </ol>
              <div class="carousel-inner" style="height:430px"><!--this height makes the panels all even so the control buttons don't bounce around-->

                <div class="item active">
                    <!-- <div class="carosel-caption">The main screen</div> -->
                  <div style="padding-left:50px; padding-right:50px">
                        <img src="imgs/main.png" width=480px/>
                  </div>
                  <div class="modal-footer">
                      Welcome to CURIO Dashboard! Here we developed a mosaic of interactive blocks. Clicking on the help button in the top banner brings this window. The top banner also lists the current status about the traffic, air quality, and most twitted category in the area. Clicking on the speak button to hear the voice of the current status.
                  </div>
                </div>
                <!--end of item-->

                <div class="item"> <!--    Second Item --------------------------->
                  <div>
                    <!-- <div class="carosel-caption">This is the caption div of the second slide</div> -->
                    <div style="padding-left:50px; padding-right:50px">
                        <img src="imgs/buttons.png" width=480px/>
                    </div>

                    <div class="modal-footer">
                        Clicking on different <b>buttons</b> to bring about different ways of showing the data.
                    </div>
                  </div>
                  <!--end of item-->
                </div>


                <div class="item"> <!--    Third Item --------------------------->
                  <div>

                    <!-- <div class="carosel-caption">This is the caption div of the second slide</div> -->
                    <div style="padding-left:50px; padding-right:50px">
                        <img src="imgs/interactivity.png" width=480px/>
                    </div>

                    <div class="modal-footer">
                        <b>Interactivity</b> goes both ways: hovering/tapping on the plot will highlight and update features on the map, and hovering on the map will highlight data on the plot.
                    </div>
                  </div>
                  <!--end of item-->
                </div>

                <div class="item"> <!--    Fourth Item --------------------------->
                  <div>

                    <!-- <div class="carosel-caption">This is the caption div of the second slide</div> -->
                    <div style="padding-left:20px; padding-right:50px">
                        <img src="imgs/plots.png" width=540px/>
                    </div>

                    <div class="modal-footer">
                        The dashboard currently has 7 plots, each representing a particular environmental, social, or transportation <b>theme</b>.
                    </div>
                  </div>
                  <!--end of item-->
                </div>

                <div class="item"> <!--    Fifth Item --------------------------->
                  <div>

                    <!-- <div class="carosel-caption">This is the caption div of the second slide</div> -->
                    <div style="padding-left:120px; padding-right:50px">
                        <img src="imgs/drag-plots.png" width=340px/>
                    </div>

                    <div class="modal-footer">
                        Each plot, except for the map, is moveable and can be <b>dragged</b> to different positions on the dashboard.
                    </div>
                  </div>
                  <!--end of item-->
                </div>

                <div class="item"> <!-- last Item --------------------------->
                  <div>

                    <!-- <div class="carosel-caption" style="text-align:center; padding: 1px;">
                        <h3>Summary</h3>
                    </div> -->
                    <div class="modal-body" style="text-align:left; padding: 50px; color: grey;">
                        <ol>
                            <b>Summary</b>
                            <li>Map can be zoomed by pinching or using the &nbsp;<i class="fa fa-plus-square-o"></i>&nbsp; and &nbsp;<i class="fa fa-minus-square-o"></i>&nbsp; buttons.</li>
                            <li>Map can be panned by dragging the mouse.</li>
                            <li>The title of each plot indicates the theme.</li>
                            <li>Click on &nbsp; <i class="iconlink fa fa-map-pin fa-1x"></i> &nbsp; to put data onto the map window; click again to remove from the map.</li>
                            <li>The red icon &nbsp; <i class="iconlink highlight fa fa-map-pin fa-1x"></i> &nbsp; indicates data is shown on map. </li>
                            <li>Click on &nbsp; <i class="iconlink fa fa-map-o fa-1x"></i> &nbsp; to view a more detailed map about the theme. </li>
                            <li>Click on &nbsp; <i class="iconlink fa fa-line-chart fa-1x"></i> &nbsp; to view the longer term trend of the theme.</li>
                            <li>Change demographic data using the dropdown list above the population histogram.</li>
                            <p/>
                            <li>The household income chart shows percent of median household income in 3 categories in 9 cities.</li>
                        </ol>
                    </div>
                  </div>
                  <!--end of item-->
                </div>

              </div>
              <a class="left carousel-control" href="#featured" role="button" data-slide="prev" >
              <span class="glyphicon glyphicon-chevron-left"></span>
              </a>

              <a class="right carousel-control" href="#featured" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right"></span>
              </a>


            </div>
            <!--end carosel-->
          </div>
          <!--modal body-->
          <!-- <div class="modal-footer">
              <button class="success center-block" data-dismiss="modal">close</button>
          </div> -->
        </div>
        <!--modal content-->
      </div>
      <!--modal-dialog-->
    </div>
    <!--end help slider modal-->


    <div id='debug'></div>
</body>
</html>
